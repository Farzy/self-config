---
# XXX Fix this for Ansible 9.3
- name: Remove Brew packages
  community.general.homebrew:
    name: "{{ homebrew_packages_removed }}"
    state: absent
  tags:
    - packages
  ignore_errors: true
  when: ansible_facts['os_family'] == 'Darwin'

- name: Install Brew packages
  community.general.homebrew:
    name: "{{ homebrew_packages | reject('equalto', omit) | list }}"
    update_homebrew: true
    state: present
  tags:
    - packages
  when: ansible_facts['os_family'] == 'Darwin'
